<!DOCTYPE html>
<!--
	Solid by Inrupt
-->
<html>
  <head>
  <title>Solid</title>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, user-scalable=no"
  />
  <link
    rel="shortcut icon"
    type="image/x-icon"
    href="/favicon.ico?"
  />
  <link
    rel="stylesheet"
    href="/assets/css/flexboxgrid.min.css"
  />
  <link rel="stylesheet" href="/assets/main.css" />
</head>


  <body>
    <div class="internal">
      <header class="internal-header">
    <div class="solid-nav">
  <a href="/" class="logo"
    ><img src="/assets/img/solid-emblem.svg"
  /> Solid</a>
  <nav class="menu">
    <ul class="links">
      
      <li >
        <a  href="/use-solid"  aria-label=Use Solid>Use Solid</a>
        
      </li>
      
      <li >
        <a  href="/for-developers"  aria-label=For Developers>For Developers</a>
        
      </li>
      
      <li >
        <a  href="/for-enterprises"  aria-label=For Enterprises>For Enterprises</a>
        
      </li>
      
      <li >
        <a  href="/faqs"  aria-label=FAQ>FAQ</a>
        
      </li>
      
    </ul>
  </nav>
  <div class="burger">
    <div class="line1"></div>
    <div class="line2"></div>
    <div class="line3"></div>
  </div>
</div>

</header>
      <main>
        <div class="page-content">
          <section class="row solid-post">
    <nav class="solid-breadcrumbs col-xs-12">
    
    <div class="solid-breadcrumbs-container row">
        <ul class="col-xs-10 col-sm-12">
            <li><a href="/">Home</a> ></li>
            
            
            <li>
                <a
                    href="/for-developers">
                    For developers ></i>
                </a>
            </li>
            
            
            
            <li>
                <a
                    href="/for-developers/apps">
                    Apps ></i>
                </a>
            </li>
            
            
            
            <li>
                <a
                    href="/for-developers/apps/common-patterns">
                    Common patterns ></i>
                </a>
            </li>
            
            
            
            <li>Notification</li>
            
            
        </ul>
        <div class="menu-mobile menu-mobile-aside col-xs-2">
            <button><i class="far"></i></button>
        </div>
    </div>
</nav>
    <article class="post h-entry col-xs-12 col-sm-8" itemscope itemtype="http://schema.org/BlogPosting">

        <div class="post-content e-content" itemprop="articleBody">
            <h1 id="notification-in-solid-apps">Notification in Solid apps</h1>

<p>When developing social apps, where users interact asynchronously, or whenever an app wants to let you know that something relevant happened, notifications come in handy. Let’s see how they are used in Solid.</p>

<h2 id="what-youll-need-for-this-tutorial">What you’ll need for this tutorial</h2>

<h3 id="interacting-entities">Interacting entities</h3>

<ul>
  <li>We’ll consider the online exchanges between <a href="https://cleopatra.solid.community">Cleopatra</a> and <a href="https://jcaesar.solid.community">Julius Caesar</a>, both known for their activity on social media (among other things). In this case, we’re not interested in Caesar as an imperarot, but rather as a successful book author: ‘De Bello Gallico’ is about to be out, and Caesar is having a release party for his memoirs. He wants to invite Cleopatra as a fellow elite member of the Roman society.</li>
  <li>If you have one, you’ll also be able to use your own pod and webid to be invited to the party! These can easily be set up on the <a href="https://solid.community/">solid community server</a>.</li>
  <li>If you want to run pieces of code illustrating these examples, check out the <a href="https://tech.io/playgrounds/51181/common-patterns-with-solid">associated playground</a></li>
</ul>

<h3 id="vocabulary-and-concepts">Vocabulary and concepts</h3>

<p>Notifications in solid are based on the <a href="https://www.w3.org/TR/ldn/">Linked Data Notification (LDN) specification</a>:</p>

<p><img src="https://www.w3.org/TR/ldn/linked-data-notifications-overview.svg" alt="LDN overview" /></p>

<p>The following terms are defined by the LDN recommandation, and here is specifically how we use them in the context of solid:</p>
<ul>
  <li>Sender: The application sending the notification</li>
  <li>Target: The id of the entity receiving the notification</li>
  <li>Receiver: The pod advertised by the Target as its own, and in particular hosting its inbox.</li>
  <li>Consumer: The app consuming the notification from the target’s inbox</li>
  <li>Notification: The message itself</li>
</ul>

<h2 id="first-things-first-inbox-discovery">First things first: inbox discovery</h2>

<p>Notifications should be sent to inboxes, and any resource can advertize for an inbox (not only webids). It’s up to the sender and to the receiver to select the appropriate resource when sending/receiving notifications. For instance, when sending a notification specifically related to Cleopatras busy schedule, one might consider addressing it to the inbox advertised by her calendar resource, <code class="highlighter-rouge">https://cleopatra.solid.community/public/calendar/inbox/</code>, that you can discover by examining the response to a GET on <code class="highlighter-rouge">https://cleopatra.solid.community/public/calendar</code>.</p>

<p>Let’s dereference <a href="https://cleopatra.solid.community/profile/card#me">cleopatra’s webid</a>, with a simple HTTP GET. You should be served an RDF document in which, among other things, you will find:</p>
<div class="language-turtle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">@prefix</span><span class="w"> </span><span class="nn">ldp:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/ns/ldp#&gt;</span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">inbox:</span><span class="w"> </span><span class="nl">&lt;/inbox/&gt;</span><span class="p">.</span><span class="w">

</span><span class="err">:</span><span class="n">me
</span><span class="w">    </span><span class="k">a</span><span class="w"> </span><span class="nn">schem:</span><span class="n">Person,</span><span class="w"> </span><span class="nn">n0:</span><span class="n">Person</span><span class="p">;</span><span class="w">
    </span><span class="p">...</span><span class="w">
    </span><span class="nn">ldp:</span><span class="n">inbox</span><span class="w"> </span><span class="nn">inbox:</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>From this snippet, we see that the WebId advertises for an inbox, in this case <code class="highlighter-rouge">https://cleopatra.solid.community/inbox/</code>, thanks to the property <code class="highlighter-rouge">ldp:inbox</code>. And that’s it, no we can get to notification sending!</p>

<iframe src="https://codesandbox.io/embed/discover-inbox-cf6gs?fontsize=14" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" title="discover-inbox" allow="geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe>

<h2 id="sending-a-notification">Sending a notification</h2>

<p>A notification is sent to the previously discovered inbox through a POST request, containing the notification body. Although it is not a strict requirement, a notification can be expressed using the ActivityStreams vocabulary (TODO: add link to voc documentation).</p>

<p>First, Caesar created the event <a href="https://jcaesar.solid.community/public/calendar/50BC/Martius/PartyAtCaesarPalace.ttl">on his pod</a>. He then sends the invite to Cleopatra’s calendar inbox:</p>
<div class="language-turtle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">POST</span><span class="w"> </span><span class="n">/public/calendar/inbox/</span><span class="w"> </span><span class="n">HTTPS/1</span><span class="mf">.1</span><span class="w">
</span><span class="nn">Host:</span><span class="w"> </span><span class="n">cleopatra</span><span class="p">.</span><span class="n">solid</span><span class="p">.</span><span class="nn">community
Content-Type:</span><span class="w"> </span><span class="n">text/turtle

</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">inv:</span><span class="w"> </span><span class="nl">&lt;&gt;</span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">as:</span><span class="w"> </span><span class="nl">&lt;https://www.w3.org/ns/activitystreams#&gt;</span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">rdfs:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/2000/01/rdf-schema#&gt;</span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">xsd:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span><span class="p">.</span><span class="w">

</span><span class="nn">inv:</span><span class="w"> </span><span class="k">a</span><span class="w"> </span><span class="nn">as:</span><span class="n">Invite</span><span class="p">;</span><span class="w">
    </span><span class="nn">rdfs:</span><span class="n">label</span><span class="w"> </span><span class="s">"Invitation"</span><span class="p">;</span><span class="w">
    </span><span class="nn">rdfs:</span><span class="n">comment</span><span class="w"> </span><span class="s">"You are invited to my book release party"</span><span class="p">;</span><span class="w">
    </span><span class="nn">as:</span><span class="n">object</span><span class="w"> </span><span class="nl">&lt;https://jcaesar.solid.community/public/calendar/50BC/Martius/PartyAtCaesarPalace.ttl&gt;</span><span class="p">.</span><span class="w">
</span></code></pre></div></div>

<p>In the response, the Location header indicates the IRI of the created event. In order to get a name nicer than a generated UUID, Caesar could have proposed a name with a Slug header in his request.</p>

<iframe src="https://codesandbox.io/embed/busy-rain-fkcyg?fontsize=14" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" title="send-notification" allow="geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe>

        </div>

        <a class="u-url" href="/for-developers/apps/common-patterns/notification" hidden></a>
    </article>
    <aside class="col-xs-12 col-sm-4 right-side">
        
        <nav class="aside-menu">
            
                
                    

<ul>
    
        
            <li>
                
                    <h4><a href="/for-developers/apps/first-app">Writing a Solid application</a></h4>
                
            </li>
        
    
        
            <li>
                
                    <h4><a href="/for-developers/apps/vocabularies">Vocabularies</a></h4>
                
            </li>
        
    
        
            
            <li> 
                <h4>Common patterns</h4>
                <!-- This is for categories with sub-categories -->
                
                    <!-- List all posts in the category (no subcategories) -->
                    <ul>
                        
                            <li ><a href="/for-developers/apps/common-patterns">Common patterns in Solid apps</a></li>                                    
                        
                            <li  class="active"><a href="/for-developers/apps/common-patterns/notification">Notification in Solid</a></li>                                    
                        
                    </ul>
                
            </li>
        
    
        
            <li>
                
                    <h4><a href="/for-developers/apps/tools">Tools and libraries</a></h4>
                
            </li>
        
    
</ul>
                
            
        </nav>
    </aside>
</section>
        </div>
      </main>
      <footer class="solid-footer">
  <nav>
    <ul class="solid-footer-menu row">
      <li class="col-xs-12 col-sm-3">
        <ul class="sub-links">
          <li>
            <span class="home-link">
              <a href="/" title="Homepage">
                Home
              </a>
            </span>
          </li>
          <li>
            <a href="/use-solid" title="Applicable licenses">
              Use Solid
            </a>
          </li>
          <li>
            <a href="/implement" title="Get support to implement Solid for your organisation">
              Implement Solid
            </a>
          </li>  
          <li>
            <a href="/team" title="How and when can you use the Solid logo?">
              Team
            </a>
          </li>
          <li>
            <a href="/faqs" title="Frequently asked questions">
              FAQs
            </a>
          </li>
        </ul>
      </li>
      <li class="col-xs-12 col-sm-3">
        <ul class="sub-links">
          <li>
            <h3>What's New</h3>
          </li>
          <li>
            <a href="/this-week-in-solid" title="Weekly updates of everything that's happening in Solid">
              This Week in Solid
            </a>
          </li>
          <li>
            <a href="/press" title="How and when can you use the Solid logo?">
              Press
            </a>
          </li>        
          <li>
            <a href="/events" title="What Solid-related events are planned?">
              Solid Events
            </a>
          </li>  
        </ul>
      </li>    
      <li class="col-xs-12 col-sm-3">
        <ul class="sub-links">
          <li>
            <h3>
              <a href="/for-developers" title="Information for developers">
                For Developers
              </a>
            </h3>
          </li>    
          <li>
            <a href="/for-developers/apps" title="Tutorials about writing Solid applications">
              Writing apps
            </a>
          </li>
          <li>
            <a href="/for-developers/pod-server" title="Tutorials on runnign your own Pod server">
              Running a Pod server
            </a>
          </li>
          <li>
            <a href="/funding" title="Where to find funding for building things with Solid">
              Funding
            </a>
          </li>
          <li>
            <a href="https://forum.solidproject.org" title="Forum">
              Forum
            </a>
          </li>
        </ul>
      </li>
      <li class="col-xs-12 col-sm-3">
        <ul class="sub-links">
          <li>
            <h3>More</h3>
          </li>
          <li>
            <a href="/standardisation" title="The process of standardising Solid">
              Standardisation
            </a>
          </li>
          <li>
            <a href="/license" title="The licenses we use">
              License
            </a>
          </li>    
          <li>
            <a href="/logo-usage-guidelines" title="How and when can you use the Solid logo?">
              Logo Usage Guidelines
            </a>
          </li>
        </ul>
      </li>    
    </ul>
  </nav>
  <div class="solid-bottom-footer row">
    <div class="solid-copyright col-xs-12">
      <img src="/assets/img/solid-emblem.svg" />
      <nav>
        <ul>
          <li>
            <a href="mailto:info@solidproject.org">info@solidproject.org</a>
          </li>
          <li>
            <a href="https://github.com/solid/" title="Solid on GitHub">
              <img
                src="/assets/img/fontawesome-free-5.11.2-web/svgs/brands/github.svg"
                alt="GitHub"
                class="icon"
              />
            </a>
          </li>
          <li>
            <a href="https://twitter.com/project_solid" title="Solid on Twitter">
              <img
                src="/assets/img/fontawesome-free-5.11.2-web/svgs/brands/twitter.svg"
                alt="Twitter"
                class="icon"
              />
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</footer>

      <script src="/assets/js/app.js"></script>
    </div>
  </body>
</html>
